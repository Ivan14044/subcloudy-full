import{d as e,E as t,u as a,o as l,c as r,J as s,l as i,m as n,n as o,t as c,f as d,x as u,F as v,G as m,p as x,A as p,C as f}from"./vendor-vue-hI7Tl2YZ.js";import{n as b,o as g,p as h,_ as w}from"./index-CY44GJdZ.js";import{_ as k}from"./BackLink.vue_vue_type_script_setup_true_lang-Cj7yD4M1.js";import{u as y}from"./vendor-i18n-DgmEITMB.js";import"./vendor-ui-C1W_zwwL.js";const _={class:"max-w-7xl mx-auto px-4 py-16 sm:px-6 lg:px-8 text-gray-900 dark:text-white relative"},j={class:"max-w-3xl mx-auto"},L={class:"flex items-start justify-between mt-6 mb-10"},$=["title"],A={key:0,class:"overflow-hidden rounded-2xl bg-white/80 dark:bg-white/[0.03] backdrop-blur-xl border border-black/10 dark:border-white/[0.08] shadow-lg"},B={class:"relative aspect-video overflow-hidden bg-gray-100 dark:bg-white/[0.04]"},D={class:"p-6"},I={class:"text-3xl md:text-4xl font-semibold mb-5"},N={class:"mb-5 flex flex-wrap gap-1"},F={class:"prose prose-neutral dark:prose-invert max-w-none relative"},H=["innerHTML"],M={class:"text-xs text-gray-500 dark:text-gray-300 my-4 float-end"},T=w(e({__name:"ArticleDetails",setup(e){const w=t(),T=a(),C=Number(w.params.id),E=b(),{locale:G}=y();l(async()=>{if(!Number.isFinite(C))return T.replace("/404");try{await E.fetchArticleById(C);const e=J.value;e&&g({title:e.title,description:e.content,image:e.img,canonical:`/articles/${C}`,locale:G.value,datePublished:null==e?void 0:e.date,breadcrumbs:[{name:"Главная",href:"/"},{name:"Статьи",href:"/articles"},{name:e.title,href:`/articles/${C}`}]})}catch(e){if("404"===(null==e?void 0:e.message))return T.replace("/404")}});const J=r(()=>{const e=E.articleById[C];if(!e)return null;const t=e.translations.find(e=>e.locale===G.value);return{...e,title:(null==t?void 0:t.title)??"No title",content:(null==t?void 0:t.content)??"",categories:e.categories}}),O=r(()=>{var e;return(null==(e=J.value)?void 0:e.img)??"/img/no-logo.png"});function P(e){var t,a;const l=G.value;return(null==(a=null==(t=e.translations)?void 0:t[l])?void 0:a.name)??e.name}function S(e){try{return(e instanceof Date?e:new Date(e)).toLocaleString()}catch{return""}}return(e,t)=>{const a=s("router-link");return n(),i("div",_,[o("div",j,[o("div",L,[J.value?(n(),i("h1",{key:0,class:"text-2xl font-medium md:text-4xl md:font-light text-dark dark:text-white min-w-0 truncate",title:J.value.title},u(J.value.title),9,$)):c("",!0),d(k,{class:"self-start"})]),J.value?(n(),i("div",A,[o("div",B,[d(h,{src:O.value,alt:J.value.title,class:"w-full h-full object-contain"},null,8,["src","alt"])]),o("div",D,[o("h1",I,u(J.value.title),1),o("div",N,[(n(!0),i(v,null,m(J.value.categories,e=>(n(),x(a,{key:e.id,to:`/categories/${e.id}`,class:"inline-flex items-center px-2 py-1 text-xs rounded border shadow-sm backdrop-blur-sm bg-black/50 text-white hover:bg-black/60 dark:bg-white/10 dark:hover:bg-white/20 cursor-pointer transition-colors","aria-label":`Open category ${P(e)}`},{default:p(()=>[f(u(P(e)),1)]),_:2},1032,["to","aria-label"]))),128))]),o("div",F,[o("div",{class:"content",innerHTML:J.value.content},null,8,H),o("div",M,u(S(J.value.date)),1)])])])):c("",!0)])])}}}),[["__scopeId","data-v-47d0fe01"]]);export{T as default};
