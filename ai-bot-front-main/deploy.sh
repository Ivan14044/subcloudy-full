#!/bin/bash

# Скрипт деплоя фронтенда
# Usage: bash deploy.sh

set -e

echo "====================================="
echo "Деплой фронтенда"
echo "====================================="
echo ""

# Переходим в директорию frontend
cd "$(dirname "$0")"

echo "[1/4] Установка зависимостей npm..."
npm install
echo "✓ Зависимости установлены"
echo ""

echo "[2/4] Сборка production версии..."
npm run build
echo "✓ Сборка завершена"
echo ""

echo "[3/4] Проверка содержимого dist/..."
if [ -d "dist" ]; then
    echo "✓ Директория dist/ существует"
    ls -lh dist/ | head -10
else
    echo "✗ Ошибка: директория dist/ не найдена!"
    exit 1
fi
echo ""

echo "[4/4] Готово к копированию на сервер"
echo "Скопируйте содержимое dist/ в public/ директорию на сервере"
echo ""

echo "====================================="
echo "✓ Сборка фронтенда завершена!"
echo "====================================="

